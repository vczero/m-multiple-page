define([],function(){function t(){}function r(t,r,e){var n=!0;if(t){var i=0,o=t.length,s=r[0],f=r[1],a=r[2];switch(r.length){case 0:for(;o>i;i+=2)n=t[i].call(t[i+1]||e)!==!1&&n;break;case 1:for(;o>i;i+=2)n=t[i].call(t[i+1]||e,s)!==!1&&n;break;case 2:for(;o>i;i+=2)n=t[i].call(t[i+1]||e,s,f)!==!1&&n;break;case 3:for(;o>i;i+=2)n=t[i].call(t[i+1]||e,s,f,a)!==!1&&n;break;default:for(;o>i;i+=2)n=t[i].apply(t[i+1]||e,r)!==!1&&n}}return n}function e(t){return"[object Function]"===Object.prototype.toString.call(t)}var n=/\s+/;t.prototype.on=function(t,r,e){var i,o,s;if(!r)return this;for(i=this.__events||(this.__events={}),t=t.split(n);o=t.shift();)s=i[o]||(i[o]=[]),s.push(r,e);return this},t.prototype.once=function(t,r,e){var n=this,i=function(){n.off(t,i),r.apply(this,arguments)};this.on(t,i,e)},t.prototype.off=function(t,r,e){var o,s,f,a;if(!(o=this.__events))return this;if(!(t||r||e))return delete this.__events,this;for(t=t?t.split(n):i(o);s=t.shift();)if(f=o[s])if(r||e)for(a=f.length-2;a>=0;a-=2)r&&f[a]!==r||e&&f[a+1]!==e||f.splice(a,2);else delete o[s];return this},t.prototype.trigger=function(t){var e,i,o,s,f,a,c=[],p=!0;if(!(e=this.__events))return this;for(t=t.split(n),f=1,a=arguments.length;a>f;f++)c[f-1]=arguments[f];for(;i=t.shift();)(o=e.all)&&(o=o.slice()),(s=e[i])&&(s=s.slice()),p=r(s,c,this)&&p,p=r(o,[i].concat(c),this)&&p;return p},t.prototype.emit=t.prototype.trigger,t.mixTo=function(r){r=e(r)?r.prototype:r;var n=t.prototype;for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])};var i=Object.keys;return i||(i=function(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r}),t});