# 美囤妈妈M站2.0重构

### 1. 历史包袱
为什么不能使用单页：需要确保之前投放的链接有效，单页会改变路由，不可能维护一个很大nginx route mapping；
目前URL只有一层，这个很苦恼，需要做一个老版本的nginx mapping。不能为了单页而单页，多页其实也可以做很多
优化。近期重构的金融项目的前端模板渲染就是之一。只能多页架构的具体原因如下：

一个好的Web应用，应该是高可维护的、路由状态可以接管的、全局状态一致的、缓存一致、离线有保证的，这一切都是
单页Web应用较好的优势，但是什么了解后发现咱们目前Web App的重构成单页的可能性不大，因为目前是多页的形式，
同时很多链接的投放都是固定，如果按照单页接管路由（module/action）的方式势必会影响到流量。不能为了单页而单页。
同时因为web应用设计之初，没有考虑到高度扩展，很多URL链接只有一层，而我们前端的组织结构应该是按照业务划分，
比如 金融/detail（包含css, js, html），这样一个对业务了解不是很多的同学，都能很快上手开发，这就强调模块化开
发。目前，应用服务器（nginx）是依赖前端文件夹目录生成路由的，这个在 前端没有架构 的情况下，是即不好的，这也就
是为何出现URL只有一层的原因，所有代码都在一个文件夹下原因。这块，我需要做一个 nginx路由配置和重写（转发）的
mapping，因为是时候调整目录结构了，而又老业务保持链接的存在。维护两套代码的方式是不可取的。

### 2.既然动静已经分离,既然已经多页,那么就要在"多页"下跳舞

3rd: 第三方库
common: 共有js类库,含有util模块
components: 组件
mod: 开发目录
舍弃本地编译,会增加体积



### 3.工程构建


    全局安装:  $ npm install -g tmodjs     &   npm install -g gulp

    src目录下: $ tmod ./bus_tpl --output ./bus_mod

    mt目录下:  $ tmod ./ui.tpl --output ./ui.mod

    //配置nginx静态服务器
    //dist压缩代码

### 4. 工程约定